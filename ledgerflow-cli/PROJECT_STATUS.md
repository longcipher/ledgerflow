# LedgerFlow CLI - é¡¹ç›®çŠ¶æ€æ€»ç»“

## é¡¹ç›®æ¦‚è¿°

æˆ‘å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªåŸºç¡€çš„ LedgerFlow CLI å·¥å…·ï¼Œç”¨äºä¸ PaymentVault æ™ºèƒ½åˆçº¦è¿›è¡Œäº¤äº’ã€‚

## å·²å®Œæˆçš„åŠŸèƒ½

### âœ… åŸºç¡€é¡¹ç›®ç»“æ„
- åˆ›å»ºäº† `ledgerflow-cli` ç›®å½•
- åˆå§‹åŒ–äº† Rust Cargo é¡¹ç›®
- é…ç½®äº†å¿…è¦çš„ä¾èµ–é¡¹

### âœ… CLI æ¡†æ¶
- ä½¿ç”¨ `clap` åº“å®ç°äº†å‘½ä»¤è¡Œç•Œé¢
- å®ç°äº†ä¸‰ä¸ªä¸»è¦å­å‘½ä»¤ï¼š
  - `deposit` - æ ‡å‡†å­˜æ¬¾ï¼ˆéœ€è¦äº‹å…ˆæ‰¹å‡† USDCï¼‰
  - `deposit-with-permit` - ä½¿ç”¨ ERC-2612 permit ç­¾åçš„é«˜æ•ˆå­˜æ¬¾
  - `withdraw` - æå–é‡‘åº“ä¸­çš„æ‰€æœ‰èµ„é‡‘ï¼ˆä»…é™æ‰€æœ‰è€…ï¼‰

### âœ… é…ç½®ç®¡ç†
- é…ç½®äº† Rust 2024 edition
- ä½¿ç”¨ `eyre` ä½œä¸ºé”™è¯¯å¤„ç†åº“
- é¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•

## é¡¹ç›®æ–‡ä»¶ç»“æ„

```
ledgerflow-cli/
â”œâ”€â”€ Cargo.toml          # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ README.md           # è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ Makefile           # ä¾¿æ·çš„æ„å»ºå‘½ä»¤
â”œâ”€â”€ .env.example       # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore         # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ src/
    â””â”€â”€ main.rs        # ä¸»ç¨‹åºæ–‡ä»¶
```

## æŠ€æœ¯ç‰¹ç‚¹

1. **æ¨¡å—åŒ–è®¾è®¡**: CLI é‡‡ç”¨å­å‘½ä»¤æ¶æ„ï¼Œä¾¿äºæ‰©å±•æ–°åŠŸèƒ½
2. **ç±»å‹å®‰å…¨**: ä½¿ç”¨ Rust å¼ºç±»å‹ç³»ç»Ÿç¡®ä¿å‚æ•°æ­£ç¡®æ€§
3. **ç”¨æˆ·å‹å¥½**: æä¾›è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯å’Œå‚æ•°è¯´æ˜
4. **é”™è¯¯å¤„ç†**: ä½¿ç”¨ `eyre` æä¾›æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯

## ä½¿ç”¨ç¤ºä¾‹

### æŸ¥çœ‹å¸®åŠ©
```bash
./target/release/ledgerflow-cli --help
```

### æ ‡å‡†å­˜æ¬¾
```bash
./target/release/ledgerflow-cli deposit \
  --rpc-url "https://sepolia.unichain.org" \
  --private-key "0x..." \
  --contract-address "0x742d35Cc6634C0532925a3b8D11C5d2B7e5B3F6E" \
  --order-id "0x1111111111111111111111111111111111111111111111111111111111111111" \
  --amount 1000000
```

### Permit å­˜æ¬¾
```bash
./target/release/ledgerflow-cli deposit-with-permit \
  --rpc-url "https://sepolia.unichain.org" \
  --private-key "0x..." \
  --contract-address "0x742d35Cc6634C0532925a3b8D11C5d2B7e5B3F6E" \
  --order-id "0x1111111111111111111111111111111111111111111111111111111111111111" \
  --amount 1000000 \
  --deadline 1735689600
```

### æå–èµ„é‡‘
```bash
./target/release/ledgerflow-cli withdraw \
  --rpc-url "https://sepolia.unichain.org" \
  --private-key "0x..." \
  --contract-address "0x742d35Cc6634C0532925a3b8D11C5d2B7e5B3F6E"
```

## å½“å‰çŠ¶æ€

ğŸ”§ **æ¡†æ¶é˜¶æ®µ**: ç›®å‰ CLI æä¾›äº†å®Œæ•´çš„å‘½ä»¤è¡Œæ¥å£å’Œå‚æ•°è§£æï¼Œæ˜¾ç¤º "coming soon" æ¶ˆæ¯ã€‚

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

ä¸ºäº†å®Œæˆå®é™…çš„åŒºå—é“¾äº¤äº’åŠŸèƒ½ï¼Œéœ€è¦ï¼š

1. **æ·»åŠ  Alloy ä¾èµ–**: é‡æ–°æ·»åŠ  `alloy = "1.0.17"` åˆ° Cargo.toml
2. **å®ç°åˆçº¦æ¥å£**: åˆ›å»º PaymentVault å’Œ USDC åˆçº¦çš„æ¥å£å®šä¹‰
3. **å®ç°å­˜æ¬¾åŠŸèƒ½**: 
   - æ ‡å‡†å­˜æ¬¾ï¼ˆapprove + depositï¼‰
   - Permit å­˜æ¬¾ï¼ˆä½¿ç”¨ ERC-2612 ç­¾åï¼‰
4. **å®ç°æå–åŠŸèƒ½**: æ‰€æœ‰è€…æå–æ‰€æœ‰èµ„é‡‘
5. **æ·»åŠ æµ‹è¯•**: å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
6. **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ

## ç¼–è¯‘å’Œè¿è¡Œ

```bash
# ç¼–è¯‘é¡¹ç›®
cargo build --release

# è¿è¡Œæµ‹è¯•
cargo test

# æŸ¥çœ‹å¸®åŠ©
./target/release/ledgerflow-cli --help
```

## é¡¹ç›®ä¼˜åŠ¿

1. **å®‰å…¨æ€§**: ä½¿ç”¨ Rust çš„å†…å­˜å®‰å…¨ç‰¹æ€§
2. **æ€§èƒ½**: ç¼–è¯‘ä¸ºåŸç”Ÿä»£ç ï¼Œæ‰§è¡Œæ•ˆç‡é«˜
3. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ä»£ç ç»“æ„å’Œç±»å‹ç³»ç»Ÿ
4. **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚çš„å‘½ä»¤è¡Œç•Œé¢
5. **è·¨å¹³å°**: æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿ

è¿™ä¸ªåŸºç¡€æ¡†æ¶ä¸ºåç»­çš„åŒºå—é“¾äº¤äº’åŠŸèƒ½å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚
